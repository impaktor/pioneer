<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Character</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Character"></a>Character</h1><div class=CBody><p>A character sheet, used to keep characteristics of any non-player character which should be persistent, allowing re-use of characters over time and across Lua scripts.</p><p>Additionally, one character sheet is initialised to keep the player&rsquo;s information.&nbsp;  Attributes in that character sheet begin as default values, and should be modified by the player&rsquo;s conduct in the game.</p><p>Character is inspired by the GURPS table-top roleplaying system.&nbsp;  In addition to details such as the character&rsquo;s name, face, rank and so forth are a number of attributes.&nbsp;  These attributes usually range from 4 to 64, although lower and higher numbers are valid.&nbsp;  The attributes define the persona of the character, and represent the chance of that character&rsquo;s success in various endeavours.&nbsp;  These chances are tested by the virtual roll of four sixteen-sided dice.&nbsp;  The target is to &ldquo;roll under&rdquo; for success.</p><p>So, if a character is trying to steal something, and there is an attribute called &ldquo;theft&rdquo; (hypothetical as I write), then we can determine whether that character succeeds by rolling the dice.&nbsp;  A character who is a good thief would have a high number in their &ldquo;theft&rdquo; attribute, making it more likely that the dice roll result will be lower.&nbsp;  If it&rsquo;s lower, the theft succeeds.</p><p>Character sheets inherit their methods, and many default values, from the class itself.</p><p>Whilst some role-playing attributes are defined here, and can be given some random values using RollNew(), in practice any arbitrary attribute can be added to a character on demand, and these attributes can be safely tested on any character, whether defined or not.&nbsp;  Undefined values return failure if tested using TestRoll().</p><p><b>Saving characters</b></p><p>Within the Character class there is a table called &ldquo;persistent&rdquo;.&nbsp;  Character sheets can be stored in this table using the Save() method.&nbsp;  This method checks whether the character sheet already exists in that table, and also updates the values of the persistence members (see below).&nbsp;  Saved characters become available to other scripts.</p><p>Saved characters are indexed numerically, and can be retrieved with ipairs() and counted with the # operator.&nbsp;  The player&rsquo;s sheet is stored as Character.persistent.player, and is the special case.</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Character" >Character</a></td><td class=SDescription>A character sheet, used to keep characteristics of any non-player character which should be persistent, allowing re-use of characters over time and across Lua scripts.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Character.Attributes" >Attributes</a></td><td class=SDescription></td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.player" >player</a></td><td class=SDescription>Boolean value; true if this instance of the table is for the player. </td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.name" >name</a></td><td class=SDescription>Name of character</td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.female" >female</a></td><td class=SDescription>Gender of character. </td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.seed" >seed</a></td><td class=SDescription>Seed for predictable randomness, if one is required.</td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.title" >title</a></td><td class=SDescription>Job title, for use in BBS faces</td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.available" >available</a></td><td class=SDescription>Boolean value; whether this character is available for use by a mission. </td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.useCount" >useCount</a></td><td class=SDescription>Count of the number of times a script has used this character. </td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.lastSavedTime" >lastSavedTime</a></td><td class=SDescription>The game time, in seconds since 12:00 01-01-3200, that this character was last saved.</td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.lastSavedSystemPath" >lastSavedSystemPath</a></td><td class=SDescription>The system path of the station or system at which this character was last saved. </td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.dead" >dead</a></td><td class=SDescription>Boolean attribute. </td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.playerRelationship" >playerRelationship</a></td><td class=SDescription>Integer attribute for RPG style dice tests. </td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.luck" >luck</a></td><td class=SDescription>Integer attribute for RPG style dice tests. </td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.intelligence" >intelligence</a></td><td class=SDescription>Integer attribute for RPG style dice tests. </td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.charisma" >charisma</a></td><td class=SDescription>Integer attribute for RPG style dice tests. </td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.notoriety" >notoriety</a></td><td class=SDescription>Integer attribute for RPG style dice tests. </td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.lawfulness" >lawfulness</a></td><td class=SDescription>Integer attribute for RPG style dice tests. </td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.engineering" >engineering</a></td><td class=SDescription>(Crew skill)</td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.piloting" >piloting</a></td><td class=SDescription>(Crew skill)</td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.navigation" >navigation</a></td><td class=SDescription>(Crew skill)</td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.sensors" >sensors</a></td><td class=SDescription>(Crew skill)</td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.killcount" >killcount</a></td><td class=SDescription>Integer value; number of objects destroyed by this character. </td></tr><tr class="SAttribute SIndent2"><td class=SEntry><a href="#Character.assistcount" >assistcount</a></td><td class=SDescription>Integer value; number of objects damaged by this character which were subsequently destroyed by something else. </td></tr><tr class="SAttribute SIndent2 SMarked"><td class=SEntry><a href="#Character.reputation" >reputation</a></td><td class=SDescription>Integer value; reflects the reputation amassed through taking missions. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Character.Methods" >Methods</a></td><td class=SDescription></td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#Character.New" >New</a></td><td class=SDescription>Returns a new character sheet, inheriting from Character, based on an optional template.</td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#Character.Clone" >Clone</a></td><td class=SDescription>Clones a character sheet.</td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#Character.DiceRoll" >DiceRoll</a></td><td class=SDescription>Returns the results of a simulated 4xD16 roll. </td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#Character.RollNew" >RollNew</a></td><td class=SDescription>Uses DiceRoll to initialise the following attributes to random values:- luck, charisma, notoriety, lawfulness.</td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#Character.TestRoll" >TestRoll</a></td><td class=SDescription>Uses DiceRoll to generate a random number, which it compares with the provided attribute. </td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#Character.SafeRoll" >SafeRoll</a></td><td class=SDescription>Uses DiceRoll to generate a random number, which it compares with the provided attribute. </td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#Character.Save" >Save</a></td><td class=SDescription>If the character is not already in the table of persistent characters, inserts the character into that table. </td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#Character.Find" >Find</a></td><td class=SDescription>Returns an iterator across all persistent characters who match the specified filter.</td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#Character.FindAvailable" >FindAvailable</a></td><td class=SDescription>Returns an iterator across all persistent characters where available is true and dead is false</td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#Character.CheckOut" >CheckOut</a></td><td class=SDescription>&ldquo;Checks out&rdquo; a persistent character, flagging it for exclusive use. </td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#Character.UnSave" >UnSave</a></td><td class=SDescription>Removes a character from the persistent characters table</td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#Character.GetCombatRating" >GetCombatRating</a></td><td class=SDescription>Returns a translatable string giving the character&rsquo;s combat rating</td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#Character.IsCombatRated" >IsCombatRated</a></td><td class=SDescription>Tests whether a character has reached a specific combat rating</td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#Character.GetReputationRating" >GetReputationRating</a></td><td class=SDescription>Returns a translatable string giving the character&rsquo;s reputation rating</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Character.Notes" >Notes</a></td><td class=SDescription>Note: ChatForm.SetFace()</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Character.Attributes"></a>Attributes</h3></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.player"></a>player</h3><div class=CBody><p>Boolean value; true if this instance of the table is for the player.&nbsp;  Only one character sheet should be that of the player.&nbsp;  Useful if there&rsquo;s the slightest chance of the player&rsquo;s own sheet getting mixed up with those of NPCs.</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.name"></a>name</h3><div class=CBody><p>Name of character</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.female"></a>female</h3><div class=CBody><p>Gender of character.&nbsp;  If true, character is female.&nbsp;  If false, male.</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.seed"></a>seed</h3><div class=CBody><p>Seed for predictable randomness, if one is required.</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.title"></a>title</h3><div class=CBody><p>Job title, for use in BBS faces</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.available"></a>available</h3><div class=CBody><p>Boolean value; whether this character is available for use by a mission.&nbsp; Used to &ldquo;lock&rdquo; a persistent character, so that two missions don&rsquo;t use the same character at the same time.&nbsp;  Not particularly meaningful for transient characters.</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.useCount"></a>useCount</h3><div class=CBody><p>Count of the number of times a script has used this character.&nbsp;  Used to determine how well used a character is.</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.lastSavedTime"></a>lastSavedTime</h3><div class=CBody><p>The game time, in seconds since 12:00 01-01-3200, that this character was last saved.</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.lastSavedSystemPath"></a>lastSavedSystemPath</h3><div class=CBody><p>The system path of the station or system at which this character was last saved.&nbsp;  Save() sets this to that of Game.player, since character sheets have no intrinsic location.&nbsp;  Can be directly set immediately after the call to Save() if it needs to be some other path.</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.dead"></a>dead</h3><div class=CBody><p>Boolean attribute.&nbsp; If set to a true value, character is deceased and all test rolls will fail.</p><h4 class=CHeading>Availability</h4><p>alpha 31</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.playerRelationship"></a>playerRelationship</h3><div class=CBody><p>Integer attribute for RPG style dice tests.&nbsp;  PlayerRelationship is intended to reflect the character&rsquo;s willingness to accommodate the player.&nbsp; Tested with 4xD16; useful values are 4 (despise) to 65 (adore).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.luck"></a>luck</h3><div class=CBody><p>Integer attribute for RPG style dice tests.&nbsp;  Luck is intended to reflect the character&rsquo;s innate good fortune.&nbsp; Tested with 4xD16; useful values are 4 (never lucky) to 65 (always lucky).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.intelligence"></a>intelligence</h3><div class=CBody><p>Integer attribute for RPG style dice tests.&nbsp;  Intelligence is intended to reflect the character&rsquo;s ability to learn.&nbsp; Tested with 4xD16; useful values are 4 (moron) to 65 (genius).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 30</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.charisma"></a>charisma</h3><div class=CBody><p>Integer attribute for RPG style dice tests.&nbsp;  Charisma is intended to reflect the character&rsquo;s ability to win contracts or favrouable deals.&nbsp; Tested with 4xD16; useful values are 4 (always hated) to 65 (always liked).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.notoriety"></a>notoriety</h3><div class=CBody><p>Integer attribute for RPG style dice tests.&nbsp;  Notoriety is intended to reflect how well the character&rsquo;s reputation (good or bad) is known.&nbsp; Tested against 4xD16; useful values are 4 (complete nobody) to 65 (celebrity).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.lawfulness"></a>lawfulness</h3><div class=CBody><p>Integer attribute for RPG style dice tests.&nbsp;  Lawfulness is intended to reflect the character&rsquo;s willingness to break the law.&nbsp; Tested with 4xD16; useful values are 4 (going straight) to 65 (criminal).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.engineering"></a>engineering</h3><div class=CBody><p>(Crew skill)</p><p>Integer attribute for RPG style dice tests.&nbsp;  Engineering is intended to reflect the character&rsquo;s mechanical, electrical or other tecnical skills.&nbsp;  Tests might be made against this attribute to see whether a character can repair a damaged piece of equipment, partially repair a ship, fit new equipment and so on.&nbsp; Tested with 4xD16; useful values are 4 (always fails) to 65 (always succeeds).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.piloting"></a>piloting</h3><div class=CBody><p>(Crew skill)</p><p>Integer attribute for RPG style dice tests.&nbsp;  Piloting is intended to reflect the character&rsquo;s skill at flying spacecraft.&nbsp; Tested with 4xD16; useful values are 4 (always crashes) to 65 (aerobat).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.navigation"></a>navigation</h3><div class=CBody><p>(Crew skill)</p><p>Integer attribute for RPG style dice tests.&nbsp;  Navigation is intended to reflect the character&rsquo;s skill at course plotting, mapping and so on.&nbsp;  This might be tested to see whether a ship can gain additional range on a hyperspace jump, by having this character involved, or if, during a mission, a character succeeds in identifying a location based on clues, etc.&nbsp; Tested with 4xD16; useful values are 4 (always lost) to 65 (human compass).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.sensors"></a>sensors</h3><div class=CBody><p>(Crew skill)</p><p>Integer attribute for RPG style dice tests.&nbsp;  Sensors is intended to reflect the character&rsquo;s ability to get the most from a ship&rsquo;s scanner, radar, etc.&nbsp; This skill might be tested to see if a hidden ship can be found, or an unknown item in space can be identified.&nbsp; Tested with 4xD16; useful values are 4 (blind) to 65 (no hiding from this guy).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.killcount"></a>killcount</h3><div class=CBody><p>Integer value; number of objects destroyed by this character.&nbsp; Automatically incremented in the case of the player by one of the stock scripts.</p><h4 class=CHeading>Availability</h4><p>alpha 29</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.assistcount"></a>assistcount</h3><div class=CBody><p>Integer value; number of objects damaged by this character which were subsequently destroyed by something else.&nbsp; Automatically incremented in the case of the player by one of the stock scripts.</p><h4 class=CHeading>Availability</h4><p>alpha 29</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CAttribute"><div class=CTopic><h3 class=CTitle><a name="Character.reputation"></a>reputation</h3><div class=CBody><p>Integer value; reflects the reputation amassed through taking missions.&nbsp; It should be reduced for failed missions, and increased for successful missions.</p><h4 class=CHeading>Availability</h4><p>January 2014</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Character.Methods"></a>Methods</h3></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.New"></a>New</h3><div class=CBody><p>Returns a new character sheet, inheriting from Character, based on an optional template.</p><p>character = Character.New(template,rand)</p><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>character</td><td class=CDLDescription>a character sheet, which inherits from Character class</td></tr></table><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>template</td><td class=CDLDescription>(optional) a table containing default values</td></tr><tr><td class=CDLEntry>rand</td><td class=CDLDescription>(optional) the Rand object to use to generate values.&nbsp; If omitted, Engine.rand will be used</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>regular_joe = Character.New()</pre></blockquote><blockquote><pre>lucky_guy = Character.New({luck = 180})</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.Clone"></a>Clone</h3><div class=CBody><p>Clones a character sheet.</p><p>clone = original:Clone()</p><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>clone</td><td class=CDLDescription>a new character sheet, which inherits from Character class and is based on the original</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>-- How to clone lucky_guy
new_guy = lucky_guy:Clone()</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.DiceRoll"></a>DiceRoll</h3><div class=CBody><p>Returns the results of a simulated 4xD16 roll.&nbsp;  Results are random, but distributed in a bell curve about the value 34.&nbsp;  The minimum result is 4, and the maximum result is 64.</p><blockquote><pre>roll = Character.DiceRoll()</pre></blockquote><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>roll</td><td class=CDLDescription>Integer value between 4 and 265 (inclusive), most likely 34</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>new_character.charisma = Character.DiceRoll()</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.RollNew"></a>RollNew</h3><div class=CBody><p>Uses DiceRoll to initialise the following attributes to random values:- luck, charisma, notoriety, lawfulness.</p><p>If optional parameter &ldquo;crew&rdquo; is specified and is true, then also:- engineering, piloting, navigation, sensors.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>crew</td><td class=CDLDescription>If true, then RollNew() also sets random crew skills, which will normally become much higher than the default values.</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>new_character:RollNew()</pre></blockquote><blockquote><pre>new_character:RollNew(true)</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.TestRoll"></a>TestRoll</h3><div class=CBody><p>Uses DiceRoll to generate a random number, which it compares with the provided attribute.&nbsp;  If the generated number is less than the sum of the attribute and the provided modifier, it returns true.&nbsp; If it is greater, or the attribute does not exist, it returns false.</p><blockquote><pre>success = somebody:TestRoll('notoriety')</pre></blockquote><p>If the DiceRoll is from 4-8, then it was a critical failure and that attribute is abused.&nbsp;  It is decremented by one for future tests.</p><p>If the DiceRoll is from 60-64, then it was a critical success and that attribute is exercised.&nbsp;  It is incremented by one for future tests.</p><p>If the Character is dead, the test roll will always fail.</p><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>success</td><td class=CDLDescription>False if failed, otherwise the dice roll value (low is good).</td></tr></table><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>attribute</td><td class=CDLDescription>The key of an attribute in this instance of the character table (such as luck, charisma, or any arbitrarily added attribute)</td></tr><tr><td class=CDLEntry>modifier</td><td class=CDLDescription>An arbitrary integer used to increase or decrease the odds of returning true or false.&nbsp;  Positive values increase the odds of a true result, and negative values increase the odds of false.&nbsp; Default is zero.</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>if (player:TestRoll('lawfulness',20)) then Comms.Message('A fellow criminal!')</pre></blockquote></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.SafeRoll"></a>SafeRoll</h3><div class=CBody><p>Uses DiceRoll to generate a random number, which it compares with the provided attribute.&nbsp;  If the generated number is less than the sum of the attribute and the provided modifier, it returns true.&nbsp; If it is greater, or the attribute does not exist, it returns false.</p><blockquote><pre>success = somebody:SafeRoll('notoriety')</pre></blockquote><p>Unlike TestRoll, this function never modifies the value of the attribute.</p><p>If the Character is dead, the test roll will always fail.</p><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>success</td><td class=CDLDescription>False if failed, otherwise the dice roll value (low is good).</td></tr></table><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>attribute</td><td class=CDLDescription>The key of an attribute in this instance of the character table (such as luck, charisma, or any arbitrarily added attribute)</td></tr><tr><td class=CDLEntry>modifier</td><td class=CDLDescription>An arbitrary integer used to increase or decrease the odds of returning true or false.&nbsp;  Positive values increase the odds of a true result, and negative values increase the odds of false.&nbsp; Default is zero.</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>if (player:SafeRoll('lawfulness',20)) then Comms.Message('A fellow criminal!')</pre></blockquote></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.Save"></a>Save</h3><div class=CBody><p>If the character is not already in the table of persistent characters, inserts the character into that table.&nbsp;  Also set available to true, and update the timestamp and location members.</p><h4 class=CHeading>Return</h4><p>Index of this character in Character.persistent table</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>attribute</td><td class=CDLDescription>The key of an attribute in this instance of the character table (such as luck, charisma, or any arbitrarily added attribute)</td></tr><tr><td class=CDLEntry>modifier</td><td class=CDLDescription>An arbitrary integer used to increase or decrease the odds of returning true or false.&nbsp;  Positive values increase the odds of a true result, and negative values increase the odds of false.&nbsp; Default is zero.</td></tr></table><h4 class=CHeading>Example</h4><p>local BBS_characterID = BBS_character:Save()</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.Find"></a>Find</h3><div class=CBody><p>Returns an iterator across all persistent characters who match the specified filter.</p><p>iterator = Character.Find(filter)</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>filter</td><td class=CDLDescription>an optional function.&nbsp;  If specified, the function will be called once for each saved character with the Character object as the only parameter.&nbsp;  If the filter function returns true then the Character will be returned by the iterator, otherwise it will be omitted.&nbsp;  If no filter function is specified then all Characters are returned.</td></tr></table><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>iterator</td><td class=CDLDescription>a function which will generate the returned results, returning one each time it is called until it runs out, after which it returns nil.</td></tr></table><h4 class=CHeading>Example</h4><p>Print names of all female characters who have charisma &gt; 36</p><blockquote><pre>for party_girl in Character.Find( function (NPC)
                                    return (NPC.female and (NPC.charisma &gt; 36))
                                  end)
do
  print(party_girl.name)
end</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.FindAvailable"></a>FindAvailable</h3><div class=CBody><p>Returns an iterator across all persistent characters where available is true and dead is false</p><p>iterator = Character.FindAvailable()</p><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>iterator</td><td class=CDLDescription>a function which will generate the returned results, returning one each time it is called until it runs out, after which it returns nil.</td></tr></table><h4 class=CHeading>Example</h4><p>Print names of all characters</p><blockquote><pre>for person in Character.FindAvailable()
do
  print(person.name)
end</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.CheckOut"></a>CheckOut</h3><div class=CBody><p>&rdquo;Checks out&rdquo; a persistent character, flagging it for exclusive use.&nbsp;  Sets available to false, meaning that FindAvailable() will not return this character.</p><p>ch:CheckOut()</p><p>A character is checked back in using Save().</p><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>true</td><td class=CDLDescription>The character was available, and has been marked unavailable</td></tr><tr><td class=CDLEntry>false</td><td class=CDLDescription>The character wasn&rsquo;t available, or didn&rsquo;t exist</td></tr></table><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.UnSave"></a>UnSave</h3><div class=CBody><p>Removes a character from the persistent characters table</p><p>ch:UnSave()</p><h4 class=CHeading>Availability</h4><p>alpha 17</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.GetCombatRating"></a>GetCombatRating</h3><div class=CBody><p>Returns a translatable string giving the character&rsquo;s combat rating</p><p>rating = ch:GetCombatRating()</p><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>rating</td><td class=CDLDescription>Translatable string</td></tr></table><h4 class=CHeading>Example</h4><p>Show player their own combat rating as a UI message</p><blockquote><pre>l = Lang.GetResource(&quot;ui-core&quot;)
UI.Message(('Your combat rating is {rating}'):interp({
    rating = l[Character.persistent.player:GetCombatRating(]),
}))</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 29</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.IsCombatRated"></a>IsCombatRated</h3><div class=CBody><p>Tests whether a character has reached a specific combat rating</p><p>ch:IsCombatRated(rating)</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>rating</td><td class=CDLDescription>One of the following values:</td></tr></table><blockquote><pre>'HARMLESS','MOSTLY_HARMLESS','POOR','AVERAGE','ABOVE_AVERAGE',
'COMPETENT','DANGEROUS','DEADLY','ELITE'</pre></blockquote><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>true</td><td class=CDLDescription>Character has reached the specified rating</td></tr><tr><td class=CDLEntry>false</td><td class=CDLDescription>Character has not reached the specified rating (or specified rating was not a valid value)</td></tr></table><h4 class=CHeading>Example</h4><p>Check to see if the player is rated &ldquo;Deadly&rdquo; or higher</p><blockquote><pre>if Character.persistent.player:IsCombatRated('DEADLY') then
  DoSomethingDeadly() -- Player is rated &quot;Deadly&quot; or higher
end</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 29</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="Character.GetReputationRating"></a>GetReputationRating</h3><div class=CBody><p>Returns a translatable string giving the character&rsquo;s reputation rating</p><p>rating = ch:GetReputationRating()</p><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>rating</td><td class=CDLDescription>Translatable string</td></tr></table><h4 class=CHeading>Example</h4><p>Show player their own reputation rating as a UI message</p><blockquote><pre>l = Lang.GetResource(&quot;ui-core&quot;)
UI.Message(('Your reputation is {reputation}'):interp({
    reputation = l[Character.persistent.player:GetReputationRating(]),
}))</pre></blockquote><h4 class=CHeading>Availability</h4><p>January 2014</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Character.Notes"></a>Notes</h3><div class=CBody><p>Note: ChatForm.SetFace()</p><p>You can pass a character directly to the SetFace() method of a ChatForm.</p><h4 class=CHeading>Example</h4><blockquote><pre>ch = Character.New()
form:SetFace(ch)</pre></blockquote><p>Note: Arbitrary attributes</p><p>You are not limited to the documented attributes, and can define more on the fly.&nbsp;  Any attribute is testable using TestRoll(), and will return false if the attribute is undefined, meaning that it is not necessary to add an attribute to all instances of Character.&nbsp;  This is handy for mission-specific skills or attributes.</p><h4 class=CHeading>Example</h4><h4 class=CHeading>To define a new attribute, &ldquo;geology,&rdquo; for testing planets</h4><blockquote><pre>some_character.geology = 45 -- a fairly high value</pre></blockquote><h4 class=CHeading>To set it to a random amount</h4><blockquote><pre>some_character.geology = Character.DiceRoll()</pre></blockquote><h4 class=CHeading>To test it</h4><blockquote><pre>-- returns true or false, depending on chance
if some_character:TestRoll('geology') then success() end</pre></blockquote><h4 class=CHeading>This will work for characters who have not had &ldquo;geology&rdquo; defined</h4><blockquote><pre>-- always returns false
if other_character:TestRoll('geology') then success() end</pre></blockquote></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Src</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="../files/LuaBody-cpp.html">Body</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaCargoBody-cpp.html">CargoBody</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaComms-cpp.html">Comms</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaConsole-cpp.html">Console</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaConstants-cpp.html">Constants</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaEngine-cpp.html">Engine</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaFaction-cpp.html">Faction</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaFileSystem-cpp.html">FileSystem</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaFormat-cpp.html">Format</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaGame-cpp.html">Game</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaHyperspaceCloud-cpp.html">HyperspaceCloud</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaInput-cpp.html">Input</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaMissile-cpp.html">Missile</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaModelBody-cpp.html">ModelBody</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaMusic-cpp.html">Music</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaObject-cpp.html">Object</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaPiGui-cpp.html">PiGui</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaPlanet-cpp.html">Planet</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaPlayer-cpp.html">Player</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaPropertiedObject-cpp.html">PropertiedObject</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaRand-cpp.html">Rand</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaServerAgent-cpp.html">ServerAgent</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaShip-cpp.html">Ship</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaShipDef-cpp.html">ShipDef</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaSpace-cpp.html">Space</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaSpaceStation-cpp.html">SpaceStation</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaStar-cpp.html">Star</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaStarSystem-cpp.html">StarSystem</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaSystemBody-cpp.html">SystemBody</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaSystemPath-cpp.html">SystemPath</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaTimer-cpp.html">Timer</a></div></div><div class=MEntry><div class=MFile><a href="../files/LuaUtils-cpp.html">util</a></div></div></div></div></div><div class=MEntry><div class=MFile id=MSelected>Character</div></div><div class=MEntry><div class=MFile><a href="EquipSet-lua.html">EquipSet</a></div></div><div class=MEntry><div class=MFile><a href="Equipment-lua.html">EquipType</a></div></div><div class=MEntry><div class=MFile><a href="Event-lua.html">Event</a></div></div><div class=MEntry><div class=MFile><a href="FlightLog-lua.html">FlightLog</a></div></div><div class=MEntry><div class=MFile><a href="Legal-lua.html">Legal</a></div></div><div class=MEntry><div class=MFile><a href="Mission-lua.html">Mission</a></div></div><div class=MEntry><div class=MFile><a href="NameGen-lua.html">NameGen</a></div></div><div class=MEntry><div class=MFile><a href="Player-lua.html">Player.lua</a></div></div><div class=MEntry><div class=MFile><a href="Ship-lua.html">Ship</a></div></div><div class=MEntry><div class=MFile><a href="SpaceStation-lua.html">SpaceStation</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Index</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Classes.html">Classes</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Interfaces.html">Interfaces</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Events.html">Events</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Attributes.html">Attributes</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Methods.html">Methods</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Constants.html">Constants</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Files.html">Files</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Attributes">Attributes</option><option value="Classes">Classes</option><option value="Constants">Constants</option><option value="Events">Events</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Interfaces">Interfaces</option><option value="Methods">Methods</option></select></div><script language=JavaScript><!--
HideAllBut([], 3);// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>